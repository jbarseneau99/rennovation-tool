 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitchen Renovation Tracker - Local Storage</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f0f0f0;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }
        .info {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            padding: 10px;
            background: #e8f5e9;
            border-radius: 5px;
        }
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            color: white;
        }
        .save-btn {
            background: #28a745;
        }
        .export-btn {
            background: #007bff;
        }
        .import-btn {
            background: #6c757d;
        }
        .reset-btn {
            background: #dc3545;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background: #667eea;
            color: white;
        }
        input[type="number"], input[type="text"], select {
            width: 100%;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: Arial, sans-serif;
        }
        .status-pending { background: #fff3cd; }
        .status-progress { background: #cce5ff; }
        .status-completed { background: #d4edda; }
        #status {
            text-align: center;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            display: none;
        }
        .success { background: #d4edda; color: #155724; display: block; }
        .error { background: #f8d7da; color: #721c24; display: block; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè† Kitchen Renovation Tracker</h1>
        <div class="info">
            ‚úÖ All data saves automatically in your browser<br>
            üì± Works offline - no internet needed<br>
            üíæ Export/Import to share between devices
        </div>
        
        <div id="status"></div>
        
        <div class="controls">
            <button class="save-btn" onclick="saveData()">üíæ Save Changes</button>
            <button class="export-btn" onclick="exportData()">üì• Export to File</button>
            <button class="import-btn" onclick="importData()">üì§ Import from File</button>
            <button class="reset-btn" onclick="resetData()">üîÑ Reset All</button>
        </div>
        
        <table>
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>Task</th>
                    <th>Days</th>
                    <th>Workers</th>
                    <th>Hours</th>
                    <th>Labor ($55/hr)</th>
                    <th>Materials ($)</th>
                    <th>Total Cost</th>
                    <th>Status</th>
                    <th>Contractor</th>
                </tr>
            </thead>
            <tbody id="taskTable">
                <!-- Tasks will be loaded here -->
            </tbody>
            <tfoot>
                <tr style="font-weight: bold; background: #f0f0f0;">
                    <td colspan="2">TOTALS</td>
                    <td id="totalDays">0</td>
                    <td>-</td>
                    <td id="totalHours">0</td>
                    <td id="totalLabor">$0</td>
                    <td id="totalMaterials">$0</td>
                    <td id="totalCost">$0</td>
                    <td colspan="2">-</td>
                </tr>
            </tfoot>
        </table>
        
        <div>
            <h3>Project Notes</h3>
            <textarea id="notes" placeholder="Enter your project notes, reminders, permit numbers, etc."></textarea>
        </div>
    </div>

    <script>
        // Default data structure
        const defaultTasks = [
            // Demolition
            { phase: "1. Demolition", task: "Remove cabinets & countertops", days: 2, workers: 2, materials: 100, status: "Pending", contractor: "" },
            { phase: "1. Demolition", task: "Remove flooring", days: 1, workers: 2, materials: 50, status: "Pending", contractor: "" },
            { phase: "1. Demolition", task: "Debris removal", days: 1, workers: 1, materials: 200, status: "Pending", contractor: "" },
            // Framing
            { phase: "2. Framing", task: "Wall modifications", days: 3, workers: 2, materials: 800, status: "Pending", contractor: "" },
            { phase: "2. Framing", task: "Window/door framing", days: 2, workers: 2, materials: 500, status: "Pending", contractor: "" },
            { phase: "2. Framing", task: "Structural reinforcement", days: 2, workers: 2, materials: 400, status: "Pending", contractor: "" },
            // Electrical
            { phase: "3. Electrical", task: "Rough-in wiring", days: 2, workers: 2, materials: 600, status: "Pending", contractor: "" },
            { phase: "3. Electrical", task: "Install outlets & switches", days: 1, workers: 2, materials: 300, status: "Pending", contractor: "" },
            { phase: "3. Electrical", task: "Lighting installation", days: 2, workers: 1, materials: 800, status: "Pending", contractor: "" },
            { phase: "3. Electrical", task: "Electrical inspection", days: 1, workers: 1, materials: 150, status: "Pending", contractor: "" },
            // Plumbing
            { phase: "4. Plumbing", task: "Rough-in plumbing", days: 2, workers: 2, materials: 500, status: "Pending", contractor: "" },
            { phase: "4. Plumbing", task: "Install sink & dishwasher lines", days: 1, workers: 2, materials: 300, status: "Pending", contractor: "" },
            { phase: "4. Plumbing", task: "Gas line for stove", days: 1, workers: 1, materials: 200, status: "Pending", contractor: "" },
            { phase: "4. Plumbing", task: "Plumbing inspection", days: 1, workers: 1, materials: 150, status: "Pending", contractor: "" },
            // Flooring
            { phase: "5. Flooring", task: "Subfloor preparation", days: 1, workers: 2, materials: 300, status: "Pending", contractor: "" },
            { phase: "5. Flooring", task: "Install flooring", days: 3, workers: 3, materials: 2500, status: "Pending", contractor: "" },
            { phase: "5. Flooring", task: "Baseboards & trim", days: 2, workers: 2, materials: 400, status: "Pending", contractor: "" },
            // Finishing
            { phase: "6. Finishing", task: "Drywall installation", days: 3, workers: 2, materials: 600, status: "Pending", contractor: "" },
            { phase: "6. Finishing", task: "Taping & mudding", days: 3, workers: 2, materials: 200, status: "Pending", contractor: "" },
            { phase: "6. Finishing", task: "Painting walls & ceiling", days: 3, workers: 2, materials: 400, status: "Pending", contractor: "" },
            { phase: "6. Finishing", task: "Install backsplash", days: 2, workers: 2, materials: 600, status: "Pending", contractor: "" },
            // Cabinets
            { phase: "7. Cabinets", task: "Cabinet delivery & inspection", days: 1, workers: 2, materials: 6000, status: "Pending", contractor: "" },
            { phase: "7. Cabinets", task: "Install upper cabinets", days: 2, workers: 2, materials: 100, status: "Pending", contractor: "" },
            { phase: "7. Cabinets", task: "Install lower cabinets", days: 2, workers: 2, materials: 100, status: "Pending", contractor: "" },
            { phase: "7. Cabinets", task: "Countertop installation", days: 2, workers: 2, materials: 3000, status: "Pending", contractor: "" },
            { phase: "7. Cabinets", task: "Hardware & final adjustments", days: 1, workers: 1, materials: 300, status: "Pending", contractor: "" }
        ];

        let tasks = [];
        const HOURLY_RATE = 55;

        // Load data from localStorage
        function loadData() {
            const saved = localStorage.getItem('renovationData');
            if (saved) {
                const data = JSON.parse(saved);
                tasks = data.tasks || defaultTasks;
                document.getElementById('notes').value = data.notes || '';
            } else {
                tasks = defaultTasks;
            }
            renderTable();
        }

        // Save data to localStorage
        function saveData() {
            const data = {
                tasks: tasks,
                notes: document.getElementById('notes').value,
                lastSaved: new Date().toISOString()
            };
            localStorage.setItem('renovationData', JSON.stringify(data));
            showStatus('Data saved successfully!', 'success');
        }

        // Render the table
        function renderTable() {
            const tbody = document.getElementById('taskTable');
            tbody.innerHTML = '';
            
            let totalDays = 0;
            let totalHours = 0;
            let totalLabor = 0;
            let totalMaterials = 0;
            
            tasks.forEach((task, index) => {
                const hours = task.days * task.workers * 8;
                const labor = hours * HOURLY_RATE;
                const total = labor + task.materials;
                
                totalDays += task.days;
                totalHours += hours;
                totalLabor += labor;
                totalMaterials += task.materials;
                
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${task.phase}</td>
                    <td>${task.task}</td>
                    <td><input type="number" value="${task.days}" onchange="updateTask(${index}, 'days', this.value)"></td>
                    <td><input type="number" value="${task.workers}" onchange="updateTask(${index}, 'workers', this.value)"></td>
                    <td>${hours}</td>
                    <td>$${labor.toLocaleString()}</td>
                    <td><input type="number" value="${task.materials}" onchange="updateTask(${index}, 'materials', this.value)"></td>
                    <td>$${total.toLocaleString()}</td>
                    <td>
                        <select onchange="updateTask(${index}, 'status', this.value)" class="status-${task.status.toLowerCase()}">
                            <option ${task.status === 'Pending' ? 'selected' : ''}>Pending</option>
                            <option ${task.status === 'In Progress' ? 'selected' : ''}>In Progress</option>
                            <option ${task.status === 'Completed' ? 'selected' : ''}>Completed</option>
                        </select>
                    </td>
                    <td><input type="text" value="${task.contractor}" onchange="updateTask(${index}, 'contractor', this.value)" placeholder="Contractor"></td>
                `;
            });
            
            // Update totals
            document.getElementById('totalDays').textContent = totalDays;
            document.getElementById('totalHours').textContent = totalHours;
            document.getElementById('totalLabor').textContent = '$' + totalLabor.toLocaleString();
            document.getElementById('totalMaterials').textContent = '$' + totalMaterials.toLocaleString();
            document.getElementById('totalCost').textContent = '$' + (totalLabor + totalMaterials).toLocaleString();
        }

        // Update a task
        function updateTask(index, field, value) {
            tasks[index][field] = field === 'days' || field === 'workers' || field === 'materials' 
                ? parseInt(value) || 0 
                : value;
            renderTable();
            saveData();
        }

        // Export data
        function exportData() {
            const data = {
                tasks: tasks,
                notes: document.getElementById('notes').value,
                exported: new Date().toISOString()
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'renovation-data-' + new Date().toISOString().split('T')[0] + '.json';
            a.click();
            showStatus('Data exported!', 'success');
        }

        // Import data
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = function(event) {
                    try {
                        const data = JSON.parse(event.target.result);
                        tasks = data.tasks || defaultTasks;
                        document.getElementById('notes').value = data.notes || '';
                        renderTable();
                        saveData();
                        showStatus('Data imported successfully!', 'success');
                    } catch (err) {
                        showStatus('Error importing file!', 'error');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        // Reset data
        function resetData() {
            if (confirm('Are you sure you want to reset all data?')) {
                localStorage.removeItem('renovationData');
                tasks = defaultTasks;
                document.getElementById('notes').value = '';
                renderTable();
                showStatus('Data reset to defaults', 'success');
            }
        }

        // Show status message
        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = type;
            setTimeout(() => {
                status.style.display = 'none';
            }, 3000);
        }

        // Auto-save on notes change
        document.getElementById('notes').addEventListener('change', saveData);

        // Load on startup
        loadData();
    </script>
</body>
</html>
